<div ng-controller='MonitorMapCtrl'>
	<ui-gmap-google-map id='mapCanvas' center='mapOption.center' zoom='mapOption.zoom' control="mapControl">

		<!-- markers -->
		<ui-gmap-markers models="markers" coords="'self'" idKey="'id'" events="'events'" icon="'icon'" control="mapControl"></ui-gmap-markers>

    <!-- lines -->
    <ui-gmap-polylines models="polylines" path="'path'" stroke="'stroke'" visible="'visible'" geodesic="'geodesic'" static='true'></ui-gmap-polylines>

		<!-- fleet marker window -->
    <ui-gmap-window id="fleetWindow" coords="selectedMarker" 
      show="windowSwitch.showFleetInfo" closeClick="closeClick()">
			<div>
        <div class="photos">
          <img src="/assets/ph_car.png"/>
          <img src="/assets/ph_user.png" hidden/>
        </div>
        <div>
            <button>Toggle photo</button>
        </div>
        <div style="overflow: auto;">
          <strong>Fleet : {{selectedMarker.name}}</strong>
          <span>Model : {{selectedMarker.car_model}}</span>
          <span>Car No. : {{selectedMarker.car_no}}</span>
          <span>Drivers : {{selectedMarker.driver.name}}</span>
          <span>Location : {{selectedMarker.address}}</span>
        </div>
        <div ng-show="'{{selectedMarker.trip_id}}' != ''">
          <button ng-click="$parent.goTrip()">Go Trip</button>
        </div>
      </div>
		</ui-gmap-window>

    <!-- trip marker window -->
    <ui-gmap-window id="tripWindow" coords="selectedMarker" 
      show="windowSwitch.showTripInfo" closeClick="closeClick()">
      <div>
        <div>Recorded at <strong>{{selectedMarker.stm | date:'medium'}}</strong></div>
        <div>Trip Started at {{selectedMarker.stm | date:'medium'}}</div>
      </div>
    </ui-gmap-window>

    <!-- batch marker window -->
    <ui-gmap-window id="batchWindow" coords="selectedMarker" 
      show="windowSwitch.showBatchInfo" closeClick="closeClick()">
      <div>
        <div>Recorded at <strong>{{selectedMarker.utm | date:'medium'}}</strong></div>
        <div>Batch Started at {{selectedMarker.stm | date:'medium'}}</div>
      </div>
    </ui-gmap-window>

    <!-- track marker window -->
    <ui-gmap-window id="trackWindow" coords="selectedMarker" 
      show="windowSwitch.showTrackInfo" closeClick="closeClick()">
      <div>
        <div>Recorded at <strong>{{selectedMarker.ctm | date:'medium'}}</strong></div>
        <div>Track Started at {{selectedMarker.ttm | date:'medium'}}</div>
        <pip-image front-image-url="/assets/images/front.jpg"
            rear-image-url="/assets/images/rear.jpg">
        </pip-image>
      </div>
    </ui-gmap-window>

    <!-- alert marker window -->
    <ui-gmap-window id="alertWindow" coords="selectedMarker" 
      show="windowSwitch.showAlertInfo" closeClick="closeClick()">
      <div>
        <div>Occurred at <strong>Fri May 29 2015 14:37:46 GMT-0800</strong></div>
        <div class="detail-address">Address : 152-198 West 32nd Street, New York, NY 10001, USA</div>
        <pip-video front-video-url="/assets/video/video1.mp4"
            rear-video-url="/assets/video/video2.mp4"
            audio-url="/assets/audio/audio1.mp3">
        </pip-video>
      </div>
    </ui-gmap-window>

	</ui-gmap-google-map>
</div>