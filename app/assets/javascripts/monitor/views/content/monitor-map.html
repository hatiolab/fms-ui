<div ng-controller='MonitorMapCtrl'>
	<ui-gmap-google-map id='mapCanvas' center='mapOption.center' zoom='mapOption.zoom' control="mapControl">

		<!-- markers -->
		<ui-gmap-markers models="markers" coords="'self'" idKey="'_id'" events="'events'" icon="'icon'"></ui-gmap-markers>

    <!-- lines -->
    <ui-gmap-polylines models="polylines" path="'path'" stroke="'stroke'" visible="'visible'" geodesic="'geodesic'" static='true'></ui-gmap-polylines>

		<!-- fleet marker window -->
    <ui-gmap-window id="fleetWindow" coords="selectedMarker" 
      show="windowSwitch.showFleetInfo" closeClick="switchOffAll()">
			<div>
        <div class="photos pull-left">
          <img src="/assets/ph_car.png"/>
          <img src="/assets/ph_user.png" hidden/>
					<button>Toggle photo</button>
        </div>
        <div class="pull-left">
	        <table class="detail-info-table">
	          <tr>
	            <th class="modal-icon dot-gray">Fleet</th>
	            <td>{{selectedMarker.name}}</td>
	          </tr>
	          <tr>
	            <th class="modal-icon dot-gray">Model</th>
	            <td>{{selectedMarker.car_model}}</td>
	          </tr>
	          <tr>
	            <th class="modal-icon dot-gray">Car No.</th>
	            <td>{{selectedMarker.car_no}}</td>
	          </tr>
	          <tr>
	            <th class="modal-icon dot-gray">Drivers</th>
	            <td>{{selectedMarker.driver.name}}</td>
	          </tr>
					</table>
        </div>
				<div class="col-xs-12 padding-clear">
					Location {{selectedMarker.address}}
				</div>
        <div ng-show="'{{selectedMarker.trip_id}}' != ''" class="col-xs-12 padding-clear">
          <button ng-click="$parent.goTripByFleet()" class="btn modal-btn-trip btn-success btn-sm">Go Trip</button>
        </div>
      </div>
		</ui-gmap-window>

    <!-- trip marker window -->
    <ui-gmap-window id="tripWindow" coords="selectedMarker" 
      show="windowSwitch.showTripInfo" closeClick="switchOffAll()">
      <div>
        <div>Trip ID <strong>{{selectedMarker.id}}</strong>/<strong>{{selectedMarker.type}}</strong></div>
        <div>Recorded at <strong>{{selectedMarker.stm | date:'medium'}}</strong></div>
        <div>Trip Started at {{selectedMarker.stm | date:'medium'}}</div>
      </div>
    </ui-gmap-window>

    <!-- batch marker window -->
    <ui-gmap-window id="batchWindow" coords="selectedMarker" 
      show="windowSwitch.showBatchInfo" closeClick="switchOffAll()">
      <div>
        <div>Batch ID <strong>{{selectedMarker.id}}</strong>/<strong>{{selectedMarker.type}}</strong></div>
        <div>Recorded at <strong>{{selectedMarker.utm | date:'medium'}}</strong></div>
        <div>Batch Started at {{selectedMarker.stm | date:'medium'}}</div>
      </div>
    </ui-gmap-window>

    <!-- track marker window -->
    <ui-gmap-window id="trackWindow" coords="selectedMarker" 
      show="windowSwitch.showTrackInfo" closeClick="switchOffAll()">
      <div>
        <div>Track ID <strong>{{selectedMarker.id}}</strong></div>
        <div>Recorded at <strong>{{selectedMarker.ctm | date:'medium'}}</strong></div>
        <div>Track Started at {{selectedMarker.ttm | date:'medium'}}</div>
        <div>Speed <strong>{{selectedMarker.vlc}}</strong></div>
        <div>G-X <strong>{{selectedMarker.gx}}</strong></div>
        <div>G-Y <strong>{{selectedMarker.gy}}</strong></div>
        <div>G-Z <strong>{{selectedMarker.gz}}</strong></div>
        <pip-image front-image-url="{{selectedMarker.f_img}}" rear-image-url="{{selectedMarker.r_img}}">
        </pip-image>
      </div>
    </ui-gmap-window>

    <!-- event marker window -->
    <ui-gmap-window id="eventWindow" coords="selectedMarker" 
      show="windowSwitch.showEventInfo" closeClick="switchOffAll()">
      <div>
        <div>Event ID <strong>{{selectedMarker.id}}</strong></div>
        <pip-video front-video-url="{{selectedMarker.f_vdo}}"
            rear-video-url="{{selectedMarker.r_vdo}}"
            audio-url="{{selectedMarker.ado}}">
        </pip-video> 
        <div class="detial-time">Occurred at <strong>{{selectedMarker.etm | date:'medium'}}</strong></div>
        <div class="detail-address">{{selectedMarker.address}}</div>
				<div class="detail-item margin-t20">
					<span class="modal-icon dot-gray">Speed</span>
					<span class="status-box red"></span> {{selectedMarker.vlc}}
				</div>
				<div class="detail-item">
					<span class="modal-icon dot-gray">G-X</span>
					<strong>{{selectedMarker.gx}}</strong>
					<span class="modal-icon dot-gray">G-Y</span>
					<strong>{{selectedMarker.gy}}</strong>
					<span class="modal-icon dot-gray">G-Z</span>
					<strong>{{selectedMarker.gz}}</strong>
				</div>
      </div>
    </ui-gmap-window>

	</ui-gmap-google-map>
</div>